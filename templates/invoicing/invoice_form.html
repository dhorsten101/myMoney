{% extends "base.html" %}
{% load widget_tweaks %}

{% block title %}{% if form.instance.pk %}Edit Invoice{% else %}New Invoice{% endif %}{% endblock %}

{% block content %}
<h2 class="mb-3">{% if form.instance.pk %}Edit Invoice{% else %}New Invoice{% endif %}</h2>

<div class="card shadow-sm">
    <div class="card-body">
        <form method="post">
            {% csrf_token %}
            <div class="row g-3">
                <!-- Customer fields removed: customer is the rental property -->

                <div class="col-md-4">
                    <label for="{{ form.issue_date.id_for_label }}" class="form-label">{{ form.issue_date.label }}</label>
                    {{ form.issue_date|add_class:"form-control" }}
                </div>
                <div class="col-md-4">
                    <label for="{{ form.due_date.id_for_label }}" class="form-label">{{ form.due_date.label }}</label>
                    {{ form.due_date|add_class:"form-control" }}
                </div>
                <div class="col-md-4">
                    <label for="{{ form.status.id_for_label }}" class="form-label">{{ form.status.label }}</label>
                    {{ form.status|add_class:"form-select" }}
                </div>

                <div class="col-md-6">
                    <label for="{{ form.rental_property.id_for_label }}" class="form-label">{{ form.rental_property.label }}</label>
                    {{ form.rental_property|add_class:"form-select" }}
                </div>

                <div class="col-md-4">
                    <label for="{{ form.total.id_for_label }}" class="form-label">{{ form.total.label }}</label>
                    {{ form.total|add_class:"form-control" }}
                </div>
                
                <div class="col-12">
                    <label for="{{ form.notes.id_for_label }}" class="form-label">{{ form.notes.label }}</label>
                    {{ form.notes|add_class:"form-control" }}
                </div>
            </div>
            <div class="mt-3">
                <button class="btn btn-success" type="submit">Save</button>
                <a class="btn btn-secondary" href="{% if form.instance.pk %}{% url 'invoice_detail' form.instance.pk %}{% else %}{% url 'invoice_list' %}{% endif %}">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}


