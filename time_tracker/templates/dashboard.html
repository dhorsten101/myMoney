{% extends 'base.html' %}
{% load humanize %}

{% block content %}
<div class="container mt-4">
  <h2>Time & Attendance</h2>
  <p>Today: {{ record.date }}</p>
  <div class="mb-3">
    <p>Check-in: {{ record.check_in_time|default:'-' }}</p>
    <p>Check-out: {{ record.check_out_time|default:'-' }}</p>
    <p>Hours: {{ record.duration_hours }}</p>
  </div>

  <form method="post" action="{% url 'time_tracker:check_in' %}" style="display:inline;">
    {% csrf_token %}
    <button class="btn btn-primary" {% if record.check_in_time %}disabled{% endif %}>Check In</button>
  </form>
  <form method="post" action="{% url 'time_tracker:check_out' %}" style="display:inline;">
    {% csrf_token %}
    <button class="btn btn-secondary" {% if not record.check_in_time or record.check_out_time %}disabled{% endif %}>Check Out</button>
  </form>

  <hr />
  <h4>Recent</h4>
  <table class="table table-sm">
    <thead>
      <tr>
        <th>Date</th>
        <th>In</th>
        <th>Out</th>
        <th>Hours</th>
      </tr>
    </thead>
    <tbody>
      {% for r in recent_records %}
      <tr>
        <td>{{ r.date }}</td>
        <td>{{ r.check_in_time|default:'-' }}</td>
        <td>{{ r.check_out_time|default:'-' }}</td>
        <td>{{ r.duration_hours }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="4" class="text-muted">No records yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}


